<template>
  <div class="home-page">
    <!-- Phase 2: Hero Intro Section -->
    <div class="hero-intro">
      <h2>å…¨æ–¹ä½çš„å…è²»è²¸æ¬¾è©¦ç®—å¹³å°</h2>
      <p class="intro-text">
        ç„¡è«–æ‚¨æ˜¯è¨ˆç•«è²·æˆ¿çš„é¦–è³¼æ—ã€éœ€è¦è³‡é‡‘å‘¨è½‰çš„å‰µæ¥­è€…ï¼Œæˆ–æ˜¯æƒ³æ¯”è¼ƒéŠ€è¡Œåˆ©ç‡çš„ç²¾æ˜ç†è²¡è€…ï¼Œ
        <strong>å…è²»è²¸æ¬¾è¨ˆç®—æ©Ÿ</strong>éƒ½èƒ½ç‚ºæ‚¨æä¾›æœ€ç²¾æº–çš„æ•¸å­—ä¾æ“šã€‚
        æˆ‘å€‘æ¡ç”¨èˆ‡éŠ€è¡ŒåŒç­‰çš„è©¦ç®—é‚è¼¯ï¼Œå”åŠ©æ‚¨è§£ææ¯æœˆé‚„æ¬¾å£“åŠ›ã€ç¸½åˆ©æ¯æ”¯å‡ºåŠæœ€ä½³è²¸æ¬¾æ–¹æ¡ˆã€‚
        <br><br>
        ä¸éœ€è¨»å†Šã€ä¸ç•™å€‹è³‡ï¼Œæ‰€æœ‰è¨ˆç®—çš†åœ¨æ‚¨çš„ç€è¦½å™¨æœ¬åœ°å®Œæˆï¼Œä¿éšœæ‚¨çš„éš±ç§å®‰å…¨ã€‚
      </p>
    </div>

    <!-- é¦–é å››å¤§åœ–ç¤º -->
    <div class="home-feature-grid">
      <div class="feature-item" v-for="f in features" :key="f.key" @click="navigateTo(f.route)">
        <div class="feature-icon">{{ f.icon }}</div>
        <div class="feature-title">{{ f.title }}</div>
        <div class="feature-desc">{{ f.desc }}</div>
      </div>
    </div>

    <!-- Phase 2: Tools Overview Section -->
    <div class="tools-overview">
      <div class="tool-desc-item" @click="navigateTo('/credit')">
        <h4>ğŸ’° ä¿¡è²¸/è»Šè²¸è¨ˆç®—</h4>
        <p>é©ç”¨æ–¼ä¿¡ç”¨è²¸æ¬¾ã€æ±½è»Šè²¸æ¬¾æˆ–ä»»ä½•åˆ†æœŸä»˜æ¬¾è©¦ç®—ã€‚æ”¯æ´ã€Œæœ¬æ¯å¹³å‡æ”¤é‚„ã€èˆ‡ã€Œæœ¬é‡‘å¹³å‡æ”¤é‚„ã€å…©ç¨®æ¨¡å¼ï¼Œä¸¦å¯ç”¢å‡ºè©³ç´°çš„æœˆä»˜é‡‘æ˜ç´°è¡¨ï¼Œè®“æ‚¨æ¸…æ¥šçŸ¥é“æ¯ä¸€å¡ŠéŒ¢åˆ©æ¯çš„å»å‘ã€‚</p>
      </div>
      <div class="tool-desc-item" @click="navigateTo('/mortgage')">
        <h4>ğŸ  æˆ¿è²¸è©¦ç®—</h4>
        <p>å°ˆç‚ºè³¼å±‹æ—è¨­è¨ˆã€‚è€ƒé‡å¯¬é™æœŸã€å–®ä¸€æˆ–åˆ†æ®µå¼åˆ©ç‡ï¼ˆå¦‚æ–°é’å®‰æˆ¿è²¸ï¼‰ç­‰å¤šç¨®åƒæ•¸ï¼Œç²¾æº–æ¨¡æ“¬æœªä¾† 20~40 å¹´çš„é‚„æ¬¾ç¾é‡‘æµï¼Œæ˜¯è²·æˆ¿å‰å¿…å‚™çš„è²¡å‹™è¦åŠƒå·¥å…·ã€‚</p>
      </div>
      <div class="tool-desc-item" @click="navigateTo('/rates')">
        <h4>ğŸ¦ åˆ©ç‡å°æ¯”</h4>
        <p>å½™æ•´å„å¤§éŠ€è¡Œæœ€æ–°çš„ä¿¡è²¸èˆ‡æˆ¿è²¸åˆ©ç‡èˆ‡æ‰‹çºŒè²»è³‡è¨Šã€‚é€éå®¢è§€çš„æ•¸æ“šæ¯”è¼ƒï¼Œå”åŠ©æ‚¨åœ¨çœ¾å¤šæ–¹æ¡ˆä¸­ç¯©é¸å‡ºæœ€åˆ’ç®—ã€éš±è—æˆæœ¬æœ€ä½çš„è²¸æ¬¾ç”¢å“ã€‚</p>
      </div>
    </div>

    <!-- æœ€æ–°è²¸æ¬¾è³‡è¨Šå€ -->
    <div class="latest-news">
      <h3>æœ€æ–°è²¸æ¬¾è³‡è¨Š</h3>
      <ul>
        <li v-for="news in latestNews" :key="news.id">
          <strong @click="openArticle(news)" class="article-link">{{news.title}}</strong> 
          <span class="date">({{ news.date }})</span>
          <p>{{ news.preview }}</p>
          <a @click.prevent="openArticle(news)" class="more-link">é–±è®€å®Œæ•´å…§å®¹ â†’</a>
        </li>
      </ul>
    </div>
  </div>
</template>

<script>
import { computed, ref } from 'vue'
import { useRouter } from 'vue-router'
import articlesData from './articles-home-data.js'

export default {
  name: 'Home',
  setup() {
    const router = useRouter()
    const features = [
      { key: 'credit', route: '/credit', icon: 'ğŸ’°', title: 'ä¿¡è²¸/è»Šè²¸è©¦ç®—', desc: 'å¿«é€Ÿè¨ˆç®—æ¯æœˆé‚„æ¬¾èˆ‡ç¸½åˆ©æ¯' },
      { key: 'mortgage', route: '/mortgage', icon: 'ğŸ ', title: 'æˆ¿è²¸è©¦ç®—', desc: 'æ”¯æ´å¯¬é™æœŸèˆ‡å¤šæ®µå¼åˆ©ç‡' },
      { key: 'rates', route: '/rates', icon: 'ğŸ¦', title: 'éŠ€è¡Œåˆ©ç‡æ¯”è¼ƒ', desc: 'å³æ™‚æ›´æ–°å„å¤§éŠ€è¡Œè²¸æ¬¾åˆ©ç‡' },
      { key: 'articles', route: '/articles', icon: 'ğŸ“°', title: 'å°ˆæ¬„æ–‡ç« ', desc: 'æœ€æ–°é‡‘èæ”¿ç­–èˆ‡è²¸æ¬¾çŸ¥è­˜' }
    ]

    const articles = ref(articlesData)
    // é¦–é æœ€æ–°2å‰‡
    const latestNews = computed(() => {
      return [...articles.value]
        .sort((a, b) => new Date(b.date) - new Date(a.date))
        .slice(0, 2);
    })

    const navigateTo = (path) => {
      router.push(path)
    }

    const openArticle = (article) => {
      router.push({ 
        name: 'Articles', 
        query: { id: article.id }
      })
    }

    return {
      features,
      latestNews,
      navigateTo,
      openArticle
    }
  }
}
</script>

<style scoped>
.hero-intro {
  background: linear-gradient(to right, #ffffff, #f0fdf4);
  padding: 2.5rem 3rem;
  border-radius: 12px;
  margin-bottom: 2rem;
  border-left: 6px solid #42b983;
  box-shadow: 0 4px 15px rgba(0,0,0,0.03);
}

.hero-intro h2 {
  color: #2c3e50;
  font-size: 2rem;
  margin-bottom: 1.2rem;
  font-weight: 700;
}

.intro-text {
  font-size: 1.1rem;
  line-height: 1.8;
  color: #555;
}

.tools-overview {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 25px;
  margin: 3rem 0;
}

.tool-desc-item {
  background: white;
  padding: 25px;
  border-radius: 10px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.04);
  border: 1px solid #eef2f5;
  transition: transform 0.2s;
  cursor: pointer;
}

.tool-desc-item:hover {
  transform: translateY(-5px);
  border-color: #42b983;
}

.tool-desc-item h4 {
  color: #2c3e50;
  font-size: 1.3rem;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 2px solid #f0f0f0;
}

.tool-desc-item p {
  color: #666;
  line-height: 1.6;
}

.home-feature-grid { display: flex; justify-content: center; align-items: stretch; gap: 2rem; margin: 2rem 0 0 0; }
.feature-item { cursor: pointer; background: #f4f8fb; border-radius: 10px; box-shadow: 0 2px 8px #ade1c2; padding: 2rem 1.2rem 1.5rem 1.2rem; width: 220px; text-align: center; transition: transform 0.18s, box-shadow 0.18s; position: relative; }
.feature-item:hover { transform: translateY(-8px) scale(1.045); box-shadow: 0 12px 32px rgba(43,120,64,0.12); }
.feature-icon { font-size: 3rem; margin-bottom: 1rem; }
.feature-title { font-size: 1.2rem; font-weight: bold; color: #2c3e50; margin-bottom: 0.5rem; }
.feature-desc { font-size: 0.9rem; color: #666; line-height: 1.4; }

.latest-news { margin-top: 3rem; background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 2px 15px rgba(0,0,0,0.05); }
.latest-news h3 { margin-bottom: 1.5rem; color: #2c3e50; border-bottom: 2px solid #f0f0f0; padding-bottom: 0.5rem; }
.latest-news ul { list-style: none; padding: 0; }
.latest-news li { margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1px dashed #eee; }
.latest-news li:last-child { border-bottom: none; }
.article-link { font-size: 1.1rem; color: #2c3e50; cursor: pointer; transition: color 0.2s; }
.article-link:hover { color: #42b983; }
.date { font-size: 0.85rem; color: #999; margin-left: 0.5rem; }
.more-link { display: inline-block; margin-top: 0.5rem; color: #42b983; cursor: pointer; font-size: 0.9rem; font-weight: 500; }
.more-link:hover { text-decoration: underline; }

/* éŸ¿æ‡‰å¼ */
@media (max-width: 768px) {
  .home-feature-grid { flex-direction: column; align-items: center; }
  .feature-item { width: 100%; max-width: 300px; }
  .hero-intro { padding: 1.5rem; }
  .tools-overview { grid-template-columns: 1fr; }
}
</style>
